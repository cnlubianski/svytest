% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weight-association.R
\name{wa_test}
\alias{wa_test}
\alias{print.wa_test}
\alias{summary.wa_test}
\alias{tidy.wa_test}
\alias{glance.wa_test}
\title{Weight-Association Tests for Survey Weights}
\usage{
wa_test(
  model,
  type = c("DD", "PS1", "PS1q", "PS2", "PS2q", "WF"),
  coef_subset = NULL,
  aux_design = NULL,
  na.action = stats::na.omit
)

\method{print}{wa_test}(x, ...)

\method{summary}{wa_test}(object, ...)

\method{tidy}{wa_test}(x, ...)

\method{glance}{wa_test}(x, ...)
}
\arguments{
\item{model}{An object of class \code{svyglm}.}

\item{type}{Character string specifying the test type:
\code{"DD"}, \code{"PS1"}, \code{"PS1q"}, \code{"PS2"}, \code{"PS2q"}, \code{"WF"}.}

\item{coef_subset}{Optional character vector of coefficient names to include
in the test. Defaults to all coefficients.}

\item{aux_design}{Optional matrix or function to generate auxiliary regressors
for PS1/PS2 tests. If a function, it should take \code{X} and \code{y}
and return a matrix of extra columns to include.}

\item{na.action}{Function to handle missing data before testing.}

\item{x}{An object of class wa_test}

\item{...}{Additional arguments passed to methods}

\item{object}{An object of class wa_test}
}
\value{
An object of class \code{"wa_test"} containing:
  \item{statistic}{F-test statistic}
  \item{parameter}{Degrees of freedom (numerator, denominator)}
  \item{p.value}{P-value for the test}
  \item{method}{Name of the test performed}
  \item{call}{Function call}
}
\description{
Implements several weight-association tests that examine whether survey
weights are informative about the response variable after conditioning
on covariates. Variants include DuMouchel-Duncan (DD), Pfeffermann-Sverchkov
(PS1 and PS2, with optional quadratic terms or user-supplied auxiliary designs),
and Wu-Fuller (WF).
}
\details{
The following weight-association test variants are available:

\itemize{
  \item \strong{DuMouchel-Duncan (DD)}: Tests informativeness by regressing
        residuals on the survey weights. One of the earliest approaches to
        diagnosing weight effects in regression.
        (DuMouchel & Duncan, 1983).

  \item \strong{Pfeffermann-Sverchkov PS1}: Augments the regression with
        functions of the weights as auxiliary regressors to test for
        informativeness. Quadratic terms can be included (\code{"PS1q"}).
        (Pfeffermann & Sverchkov, 1999).

  \item \strong{Pfeffermann-Sverchkov PS2}: Uses a two-step approach with
        fitted values from an auxiliary regression of weights on covariates
        to construct test regressors. Quadratic terms can be included
        (\code{"PS2q"}). (Pfeffermann & Sverchkov, 2003).

  \item \strong{Wu-Fuller (WF)}: A preliminary test procedure that evaluates
        whether weighted and unweighted regression estimates differ
        significantly, providing a practical diagnostic for weight necessity.
        (Wu & Fuller, 2005).
}
}
\examples{
if (requireNamespace("survey", quietly = TRUE)) {
  # Load in survey package (required) and load in example data
  library(survey)
  data("svytestCE", package = "svytest")

  # Create a survey design and fit a weighted regression model
  des <- svydesign(ids = ~1, weights = ~FINLWT21, data = svytestCE)
  fit <- svyglm(TOTEXPCQ ~ ROOMSQ + BATHRMQ + BEDROOMQ + FAM_SIZE + AGE, design = des)

  # Run weight-association diagnostic test; reports F-stat, df's, and p-value
  results <- wa_test(fit, type = "DD")
  print(results)
}

}
\references{
DuMouchel, W. H., & Duncan, G. J. (1983).
  Using sample survey weights in multiple regression analyses of stratified samples.
  *Journal of the American Statistical Association*, 78(383), 535-543.

Pfeffermann, D., & Sverchkov, M. (1999).
  Parametric and semi-parametric estimation of regression models fitted to survey data.
  *Sankhya: The Indian Journal of Statistics, Series B*, 61(1), 166-186.

Pfeffermann, D., & Sverchkov, M. (2003).
  Fitting generalized linear models under informative sampling.
  In R. L. Chambers & C. J. Skinner (Eds.), *Analysis of Survey Data*
  (pp. 175-196). Wiley.

Wu, Y., & Fuller, W. A. (2005).
  Preliminary testing procedures for regression with survey samples.
  In *Proceedings of the Joint Statistical Meetings, Survey Research Methods Section*
  (pp. 3683-3688). American Statistical Association.
}
\seealso{
\code{\link{diff_in_coef_test}} for the Hausman-Pfeffermann difference-in-coefficients test,
and \code{\link{svytestCE}} for the example dataset included in this package.
}
